# ========================================
# Production Overlay
# ========================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

nameSuffix: -prod

resources:
  - ../../base

images:
  - name: cannaai/cannaai-pro
    newTag: "v1.0.0"

replicas:
  - name: cannaai-app
    count: 5

patchesStrategicMerge:
  - patch-replicas.yaml
  - patch-resources.yaml

# Environment-specific configurations
configMapGenerator:
  - name: cannaai-config-prod
    behavior: merge
    literals:
      - LOG_LEVEL=info
      - CORS_ENABLED=true
      - SSL_ENABLED=true

secretGenerator:
  - name: cannaai-secrets-prod
    behavior: merge
    envs:
      - .env.production

# Add monitoring labels
commonLabels:
  environment: production
  tier: production
